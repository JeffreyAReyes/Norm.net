# PERFOMANCE BENCHMARKS
 
 - This is aggreated results based on the latest version [3.3.0](https://github.com/vb-consulting/Norm.net/blob/master/CHANGES.md#330)
 
- You can run manual tests by building and running this [project](https://github.com/vb-consulting/Norm.net/tree/master/BenchmarksConsole).
 
- Query used for testing returns **1 million records** from local test PostgreSQL server, **10 fields** of various types wide. 
 
- Tests for Dapper and Norm will serialize to one **class** and one **record** structure.
 
- Tests for Norm will also do serialization of **tuples** tuple values, named tuples. Since it is the only library that supports that.
 
- **Raw data reader** performance tests are included for comparison.

## Aggregated Results

### Dapper

|Operation|Average Time in Sec.|Average Memory Consuption in KB|
|---------|-----------------------|----------------------------|
|Buffered Dapper `Query<class>`|4.688|316442|
|Buffered Dapper `Query<record>`|4.735|316649|
|Unbuffered Dapper `Query<class>`|4.611|316625|
|Unbuffered Dapper `Query<record>`|4.707|316726|
|Async Buffered Dapper `QueryAsync<class>`|4.524|316010|
|Async Buffered Dapper `QueryAsync<record>`|4.686|315943|
|Async Unbuffered Dapper `QueryAsync<class>`|Not Available|Not Available|
|Async Unbuffered Dapper `QueryAsync<record>`|Not Available|Not Available|

### Norm

|Operation|Average Time in Sec.|Average Memory Consuption in KB|
|---------|-----------------------|----------------------------|
|Norm `Read<class>`|4.173|317348|
|Norm `Read<record>`|4.105|316353|
|Norm `Read<built-in types>`|4.060|295511|
|Norm `Read<tuple>`|4.868|298561|
|Norm `ReadAsync<class>`|4.279|315272|
|Norm `ReadAsync<record>`|4.267|315313|
|Norm `ReadAsync<built-in types>`|4.733|295304|
|Norm `ReadAsync<tuple>`|5.065|298237|

### Raw Data Reader

|Operation|Average Time in Sec.|Average Memory Consuption in KB|
|---------|-----------------------|----------------------------|
|Raw Data Reader|3.991|315771|
|Raw Data Reader Async|4.115|462760|

### Dapper Buffered and Unbuffered vs Norm execution and iteration

|Operation|Execution Sec.|Iteration Sec.|Total Sec.|
|---------|--------------|--------------|----------|
|Buffered Dapper `Query`|00:00:00.0000040|00:00:04.0964483|00:00:04.0964524|
|Unbuffered Dapper `Query`|00:00:04.4367274|00:00:00.0130482|00:00:04.4367274|
|Norm `Read`|00.0000125|00:00:00.0000129|00:00:04.0117615|00:00:04.0117745|

## Full outoput

## Dapper Buffered Query Class and Record Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:05.1970641|315069,3125|00:00:04.6469315|316104,375|
|2|00:00:04.5819056|316429,3125|00:00:04.6861946|316658,25|
|3|00:00:04.5923249|316600,84375|00:00:04.6973144|316706,1875|
|4|00:00:04.6499249|316621|00:00:04.8989061|316714,1875|
|5|00:00:04.9040293|316617|00:00:04.9128946|316714,3125|
|6|00:00:04.5989316|316612,8125|00:00:04.6773708|316718,3125|
|7|00:00:04.5706973|316616,96875|00:00:04.8431769|316722,34375|
|8|00:00:04.5506054|316616,8125|00:00:04.7179855|316718,125|
|9|00:00:04.5979217|316617,03125|00:00:04.6678913|316722,25|
|10|00:00:04.6404566|316620,8125|00:00:04.6060661|316714,375|
|**AVG**|**00:00:04.6883861**|**316442,1875**|**00:00:04.7354731**|**00:00:04.7354731**|

Finished.

## Dapper Unbuffered Query Class and Record Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:04.5408403|316625,0625|00:00:04.7271237|316726,1875|
|2|00:00:04.7924215|316620,78125|00:00:04.8533112|316722|
|3|00:00:04.5934699|316624,75|00:00:04.7344776|316722,40625|
|4|00:00:04.5246817|316620,625|00:00:04.6704983|316728,4375|
|5|00:00:04.5918044|316628,78125|00:00:04.6698731|316718,09375|
|6|00:00:04.5670032|316624,9375|00:00:04.7427130|316733,90625|
|7|00:00:04.5146994|316628,71875|00:00:04.6720046|316734,0625|
|8|00:00:04.6103987|316629,0625|00:00:04.6180326|316734,15625|
|9|00:00:04.7345965|316629,09375|00:00:04.8066754|316722,4375|
|10|00:00:04.6403327|316620,6875|00:00:04.5848219|316722,375|
|**AVG**|**00:00:04.6110248**|**316625,25**|**00:00:04.7079531**|**316726,40625**|

Finished.

## Norm Read Class and Record Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:04.0556813|319291,0625|00:00:04.1692105|315062|
|2|00:00:04.0796799|318196,03125|00:00:04.3202832|315988|
|3|00:00:04.0644579|314889,65625|00:00:04.0409655|318031,84375|
|4|00:00:03.9896365|319640,03125|00:00:04.0402620|315074|
|5|00:00:04.1956823|314807,8125|00:00:04.0913066|317922,46875|
|6|00:00:04.1514420|319487,1875|00:00:04.2448291|315119,9375|
|7|00:00:04.8153910|314639,375|00:00:03.9797306|317871,5|
|8|00:00:04.1081273|319432,90625|00:00:04.1363094|314877,53125|
|9|00:00:04.1688719|317979|00:00:04.0248137|315546|
|10|00:00:04.1016897|315118,1875|00:00:04.0084158|318033,4375|
|**AVG**|**00:00:04.1730659**|**317348,125**|**00:00:04.1056126**|**316352,6875**|

Finished.

## Norm Read Values and Tuples vs Raw Data Reader Tests

|#|Values Elapsed Sec|Values Allocated KB|Tuples Elapsed Sec|Tuples Allocated KB|Raw Reader Elapsed Sec|Raw Reader Allocated KB|
|-|------------------|-------------------|------------------|-------------------|----------------------|-----------------------|
|1|00:00:04.1196822|295734,71875|00:00:04.6677186|298716,6875|00:00:04.0568358|315848,3125|
|2|00:00:04.0378703|295544,4375|00:00:04.7369701|298608,59375|00:00:04.0008053|315810,59375|
|3|00:00:04.0338666|295488,125|00:00:05.1952138|298637,09375|00:00:04.0785511|315802,0625|
|4|00:00:04.0543869|295505,9375|00:00:04.7687017|298565,53125|00:00:03.9646145|315749,75|
|5|00:00:04.1221909|295476,1875|00:00:04.8628865|298471,03125|00:00:04.0440743|315747,375|
|6|00:00:03.9665340|295474,03125|00:00:04.8967447|298636,625|00:00:03.9589265|315793,5625|
|7|00:00:04.0678289|295490,5|00:00:04.7893568|298470,6875|00:00:03.9222647|315740,59375|
|8|00:00:04.0366050|295467,625|00:00:05.0934949|298432,21875|00:00:03.9451322|315732,9375|
|9|00:00:04.1126274|295463,375|00:00:04.7726205|298539,875|00:00:03.9759875|315741,34375|
|10|00:00:04.0579047|295465,21875|00:00:04.9039400|298532,28125|00:00:03.9669732|315742|
|**AVG**|**00:00:04.0609496**|**295511**|**00:00:04.8687647**|**298561,0625**|**00:00:03.9914165**|**315770,84375**|

Finished.

## Dapper Query and Iteration (Buffered and Unbuffered) vs Norm Read and Iteration Tests

|#|Dapper Buffered Query|Dapper Buffered Iteration|Daper Buffered Total|Dapper Unbuffered Query|Dapper Unbuffered Iteration|Daper Unbuffered Total|Norm Read|Norm Iteration|Norm Total|
|-|---------------------|-------------------------|--------------------|-----------------------|---------------------------|----------------------|---------|--------------|----------|
|1|00:00:04.4262900|00:00:00.0133603|00:00:04.4396503|00:00:00.0000045|00:00:03.9857232|00:00:03.9857277|00:00:00.0000814|00:00:03.9679259|00:00:03.9680073|
|2|00:00:04.4116118|00:00:00.0128740|00:00:04.4244858|00:00:00.0000038|00:00:04.0012796|00:00:04.0012834|00:00:00.0000045|00:00:03.9427512|00:00:03.9427557|
|3|00:00:04.3987803|00:00:00.0135382|00:00:04.4123185|00:00:00.0000040|00:00:04.8578116|00:00:04.8578156|00:00:00.0000043|00:00:04.1226345|00:00:04.1226388|
|4|00:00:04.4155233|00:00:00.0130848|00:00:04.4286081|00:00:00.0000042|00:00:03.9837996|00:00:03.9838038|00:00:00.0000051|00:00:03.9744657|00:00:03.9744708|
|5|00:00:04.5141159|00:00:00.0130261|00:00:04.5271420|00:00:00.0000040|00:00:03.9780713|00:00:03.9780753|00:00:00.0000046|00:00:04.0074560|00:00:04.0074606|
|6|00:00:04.4762734|00:00:00.0128455|00:00:04.4891189|00:00:00.0000044|00:00:03.9737521|00:00:03.9737565|00:00:00.0000046|00:00:04.0043757|00:00:04.0043803|
|7|00:00:04.4648091|00:00:00.0127499|00:00:04.4775590|00:00:00.0000038|00:00:03.9629174|00:00:03.9629212|00:00:00.0000078|00:00:03.9343582|00:00:03.9343660|
|8|00:00:04.4292039|00:00:00.0126265|00:00:04.4418304|00:00:00.0000036|00:00:04.1534484|00:00:04.1534520|00:00:00.0000055|00:00:04.2762461|00:00:04.2762516|
|9|00:00:04.4496553|00:00:00.0135156|00:00:04.4631709|00:00:00.0000039|00:00:03.9909796|00:00:03.9909835|00:00:00.0000060|00:00:03.9832500|00:00:03.9832560|
|10|00:00:04.3810110|00:00:00.0128620|00:00:04.3938730|00:00:00.0000040|00:00:04.0767011|00:00:04.0767051|00:00:00.0000055|00:00:03.9041526|00:00:03.9041581|
|**AVG**|**00:00:04.4367274**|**00:00:00.0130482**|**00:00:04.4497756**|**00:00:00.0000040**|**00:00:04.0964483**|**00:00:04.0964524**|**00:00:00.0000129**|**00:00:04.0117615**|**00:00:04.0117745**|

Finished.

## Dapper Buffered Query Class and Record Async Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:04.4333782|316892,9375|00:00:04.5961174|315900,9375|
|2|00:00:04.5707681|315925,09375|00:00:04.6463152|315974|
|3|00:00:04.5280866|315910,03125|00:00:04.6615849|315942,3125|
|4|00:00:04.4539007|315912,0625|00:00:04.9516232|315936,1875|
|5|00:00:04.5212884|315906,6875|00:00:04.7423375|315940|
|6|00:00:04.4908042|315905,4375|00:00:04.6875663|315930,46875|
|7|00:00:04.4520693|315911,65625|00:00:04.6451699|315939,53125|
|8|00:00:04.5049774|315907,6875|00:00:04.5856443|315945,0625|
|9|00:00:04.6433804|315910,15625|00:00:04.6497943|315950,125|
|10|00:00:04.6513430|315913,15625|00:00:04.7009647|315971,78125|
|**AVG**|**00:00:04.5249996**|**316009,5**|**00:00:04.6867117**|**315943,03125**|

Finished.

## Norm Read Class and Record Async Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:04.4904658|315751,875|00:00:04.5212565|315527,875|
|2|00:00:04.4483329|315257,1875|00:00:04.3172299|315314,65625|
|3|00:00:04.1607750|315097,78125|00:00:04.1319041|315735,0625|
|4|00:00:04.1720732|315315,15625|00:00:04.0766427|315260,4375|
|5|00:00:04.4018422|314529,4375|00:00:04.1817452|314951,59375|
|6|00:00:04.2310407|315042,75|00:00:04.1310591|315333,40625|
|7|00:00:04.1574553|315529,375|00:00:04.2044492|315520,1875|
|8|00:00:04.2540377|315587,21875|00:00:04.5528672|315178,1875|
|9|00:00:04.2488283|315290,4375|00:00:04.3150089|314936,53125|
|10|00:00:04.2303904|315314,3125|00:00:04.2379647|315371,5625|
|**AVG**|**00:00:04.2795241**|**315271,5625**|**00:00:04.2670127**|**315312,96875**|

Finished.

## Norm Read Values and Tuples vs Raw Data Reader Async Tests

|#|Values Elapsed Sec|Values Allocated KB|Tuples Elapsed Sec|Tuples Allocated KB|Raw Reader Elapsed Sec|Raw Reader Allocated KB|
|-|------------------|-------------------|------------------|-------------------|----------------------|-----------------------|
|1|00:00:04.7980284|294914,28125|00:00:04.9835243|298301,9375|00:00:04.1248237|496086,0625|
|2|00:00:04.7281369|295227,59375|00:00:05.0159059|298296,9375|00:00:04.0052710|493877,0625|
|3|00:00:04.6120181|295369,96875|00:00:05.1377965|298271,21875|00:00:04.3829531|475817,4375|
|4|00:00:04.9644301|295328,875|00:00:04.9843801|298219,78125|00:00:04.1613604|440228,96875|
|5|00:00:04.7190170|295626,96875|00:00:04.9034804|298130,9375|00:00:04.0263860|496731,65625|
|6|00:00:04.7084882|295450,6875|00:00:05.0327016|298131,90625|00:00:04.0368048|449079,625|
|7|00:00:04.7002771|295201,34375|00:00:05.1167415|298310,53125|00:00:04.0072135|441786,0625|
|8|00:00:04.6700145|295356,96875|00:00:05.2981426|298177,3125|00:00:04.2096411|443853,46875|
|9|00:00:04.7872859|295532,34375|00:00:05.0023548|298150,65625|00:00:04.1081863|444348,46875|
|10|00:00:04.6514835|295026,25|00:00:05.1815671|298381|00:00:04.0953881|445790,75|
|**AVG**|**00:00:04.7339179**|**295303,53125**|**00:00:05.0656594**|**298237,21875**|**00:00:04.1158028**|**462759,9375**|

Finished.

## Dapper Buffered Query and Iteration vs Norm Read and Iteration Async Tests

|#|Dapper Buffered Query|Dapper Buffered Iteration|Daper Buffered Total|Dapper Buffered Allocated KB|Norm Read|Norm Iteration|Norm Total|Norm Allocated KB|
|-|---------------------|-------------------------|--------------------|----------------------------|---------|--------------|----------|-----------------|
|1|00:00:04.4654982|00:00:00.0125466|00:00:04.4780448|315981,9375|00:00:00.0000187|00:00:04.0108830|00:00:04.0109017|316448,3125|
|2|00:00:04.4669453|00:00:00.0131156|00:00:04.4800609|316887,78125|00:00:00.0000131|00:00:03.9747241|00:00:03.9747372|316703,3125|
|3|00:00:04.5056047|00:00:00.0130812|00:00:04.5186859|316879,625|00:00:00.0000142|00:00:03.9789955|00:00:03.9790097|316678,875|
|4|00:00:04.5183157|00:00:00.0134442|00:00:04.5317599|316879,53125|00:00:00.0000144|00:00:04.3067277|00:00:04.3067421|315886,3125|
|5|00:00:04.4638821|00:00:00.0127012|00:00:04.4765833|316879,90625|00:00:00.0000142|00:00:03.9360625|00:00:03.9360767|316640,4375|
|6|00:00:04.4878079|00:00:00.0131819|00:00:04.5009898|316879,8125|00:00:00.0000142|00:00:03.9913163|00:00:03.9913305|316616|
|7|00:00:04.5119352|00:00:00.0127258|00:00:04.5246610|316875,6875|00:00:00.0000201|00:00:04.0262827|00:00:04.0263028|316718,78125|
|8|00:00:04.6002708|00:00:00.0130684|00:00:04.6133392|316883,625|00:00:00.0000118|00:00:04.0014378|00:00:04.0014496|316712,25|
|9|00:00:04.3731637|00:00:00.0132018|00:00:04.3863655|316887,65625|00:00:00.0000128|00:00:03.8638470|00:00:03.8638598|316647|
|10|00:00:04.3563689|00:00:00.0130677|00:00:04.3694366|316875,625|00:00:00.0000148|00:00:04.0069693|00:00:04.0069841|316672,4375|
|**AVG**|**00:00:04.4749792**|**00:00:00.0130134**|**00:00:04.4879926**|**316791,125**|**00:00:00.0000148**|**00:00:04.0097245**|**00:00:04.0097394**|**316572,375**|

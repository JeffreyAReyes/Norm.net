# PERFOMANCE BENCHMARKS
 
 - This is aggreated results based on the latest version [3.3.0](https://github.com/vb-consulting/Norm.net/blob/master/CHANGES.md#330)
 
- You can run manual tests by building and running this [project](https://github.com/vb-consulting/Norm.net/tree/master/BenchmarksConsole).
 
- Query used for testing returns **1 million records** from local test PostgreSQL server, **10 fields** of various types wide. 
 
- Tests for Dapper and Norm will serialize to one **class** and one **record** structure.
 
- Tests for Norm will also do serialization of **tuples** tuple values, named tuples. Since it is the only library that supports that.
 
- **Raw data reader** performance tests are included for comparison.

## Aggregated Results

### Dapper

|Operation|Average Time in Sec.|Average Memory Consuption in KB|
|---------|-----------------------|----------------------------|
|Buffered Dapper `Query<class>`|04.73|316421|
|Buffered Dapper `Query<record>`|04.73|316631|
|Unbuffered Dapper `Query<class>`|04.75|316619|
|Unbuffered Dapper `Query<record>`|04.82|316721|
|Async Buffered Dapper `QueryAsync<class>`|05.36|316023|
|Async Buffered Dapper `QueryAsync<record>`|05.12|316258|
|Async Unbuffered Dapper `QueryAsync<class>`|Not Available|Not Available|
|Async Unbuffered Dapper `QueryAsync<record>`|Not Available|Not Available|

### Norm

|Operation|Average Time in Sec.|Average Memory Consuption in KB|
|---------|-----------------------|----------------------------|
|Norm `Read<class>`|04.15|317470|
|Norm `Read<record>`|04.16|316289|
|Norm `Read<built-in types>`|04.22|295535|
|Norm `Read<tuple>`|04.63|298594|
|Norm `ReadAsync<class>`|04.51|315917|
|Norm `ReadAsync<record>`|04.39|315862|
|Norm `ReadAsync<built-in types>`|05.28|295416|
|Norm `ReadAsync<tuple>`|05.16|298594|

### Raw Data Reader

|Operation|Average Time in Sec.|Average Memory Consuption in KB|
|---------|-----------------------|----------------------------|
|Raw Data Reader|04.17|315765|
|Raw Data Reader Async|04.60|411821|

### Dapper Buffered and Unbuffered vs Norm execution and iteration

|Operation|Execution Sec.|Iteration Sec.|Total Sec.|
|---------|--------------|--------------|----------|
|Buffered Dapper `Query`|04.6706588|00.0110987|04.6817576|
|Unbuffered Dapper `Query`|00.0000042|04.0699669|4.0699711|
|Norm `Read`|00.0000125|00:04.0358505|04.0358631|

## Full outoput

## Dapper Buffered Query Class and Record Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:05.6310108|314967,625|00:00:05.3506185|316075,1875|
|2|00:00:05.5515596|316411,125|00:00:04.8649076|316573,59375|
|3|00:00:04.4815337|316589,125|00:00:04.7914827|316710,4375|
|4|00:00:04.4604016|316604,78125|00:00:04.7014680|316710,3125|
|5|00:00:04.5129115|316605,0625|00:00:04.6054455|316714,34375|
|6|00:00:04.3990568|316604,75|00:00:04.6210649|316698,125|
|7|00:00:04.4499862|316605,03125|00:00:04.5714955|316702,3125|
|8|00:00:04.4607912|316604,78125|00:00:04.5539887|316702,1875|
|9|00:00:05.0244033|316605|00:00:04.5775757|316706,40625|
|10|00:00:04.3469075|316608,75|00:00:04.6469697|316718,375|
|**AVG**|**00:00:04.7318562**|**316420,59375**|**00:00:04.7285016**|**316631,125**|

Finished.

## Dapper Unbuffered Query Class and Record Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:05.0006351|316616,6875|00:00:04.9587250|316710,3125|
|2|00:00:04.6856230|316608,75|00:00:04.5553561|316710,40625|
|3|00:00:04.4480673|316612,875|00:00:04.4980200|316709,3125|
|4|00:00:04.4709353|316616,96875|00:00:04.5251482|316726,375|
|5|00:00:04.5916318|316629,0625|00:00:04.6020007|316722|
|6|00:00:04.9391954|316625,0625|00:00:04.4890533|316730,125|
|7|00:00:04.5521332|316621,0625|00:00:04.3971885|316721,875|
|8|00:00:05.1765387|316620,8125|00:00:06.1096672|316730,125|
|9|00:00:05.0073158|316621|00:00:05.2058884|316726,125|
|10|00:00:04.6486373|316617,03125|00:00:04.9253677|316718,21875|
|**AVG**|**00:00:04.7520712**|**316618,9375**|**00:00:04.8266415**|**316720,5**|

Finished.

## Norm Read Class and Record Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:04.1500564|319063,0625|00:00:04.1114617|315011,15625|
|2|00:00:04.1686808|318235,09375|00:00:04.4546956|315760,8125|
|3|00:00:04.5335468|314865,1875|00:00:04.2991128|317972,625|
|4|00:00:04.2405044|319672,0625|00:00:04.1123502|315211,53125|
|5|00:00:04.1280374|314769,3125|00:00:04.1033139|317945,75|
|6|00:00:04.0589647|319511,8125|00:00:04.0313037|314985,59375|
|7|00:00:03.9884230|314698,53125|00:00:04.0060108|317927,5|
|8|00:00:04.1520674|319608,8125|00:00:03.9869169|315106,4375|
|9|00:00:03.9976178|314778,71875|00:00:04.0776939|317957,53125|
|10|00:00:04.0645577|319495,5625|00:00:04.4001249|315013,875|
|**AVG**|**00:00:04.1482456**|**317469,8125**|**00:00:04.1582984**|**316289,28125**|

Finished.

## Norm Read Values and Tuples vs Raw Data Reader Tests

|#|Values Elapsed Sec|Values Allocated KB|Tuples Elapsed Sec|Tuples Allocated KB|Raw Reader Elapsed Sec|Raw Reader Allocated KB|
|-|------------------|-------------------|------------------|-------------------|----------------------|-----------------------|
|1|00:00:04.4139476|295025,59375|00:00:04.5898900|298534,6875|00:00:03.8239500|315769,8125|
|2|00:00:03.9671122|295507,40625|00:00:04.3642048|298620,0625|00:00:03.8398289|315762,21875|
|3|00:00:03.7969043|295475,0625|00:00:04.3850439|298591,53125|00:00:04.0075249|315757,1875|
|4|00:00:04.0928829|295489,53125|00:00:04.4749192|298559,46875|00:00:03.9834856|315749,53125|
|5|00:00:04.3407086|295475,9375|00:00:04.7849196|298553,34375|00:00:04.2036251|315755,6875|
|6|00:00:04.7852900|295496,6875|00:00:04.7447656|298680,125|00:00:03.9772048|315792,84375|
|7|00:00:04.1251115|295495,375|00:00:04.8177038|298577,125|00:00:04.4251197|315753,375|
|8|00:00:04.3311900|295476,75|00:00:04.8172286|298596,625|00:00:04.7801025|315763,6875|
|9|00:00:04.3390783|295485,46875|00:00:04.7628989|298621,59375|00:00:04.2860882|315788,75|
|10|00:00:04.0258750|295488,34375|00:00:04.5410404|298603,71875|00:00:04.4464591|315758,09375|
|**AVG**|**00:00:04.2218100**|**295441,625**|**00:00:04.6282614**|**298593,84375**|**00:00:04.1773388**|**315765,125**|

Finished.

## Dapper Query and Iteration (Buffered and Unbuffered) vs Norm Read and Iteration Tests

|#|Dapper Buffered Query|Dapper Buffered Iteration|Daper Buffered Total|Dapper Unbuffered Query|Dapper Unbuffered Iteration|Daper Unbuffered Total|Norm Read|Norm Iteration|Norm Total|
|-|---------------------|-------------------------|--------------------|-----------------------|---------------------------|----------------------|------------------------|----------|
|1|00:00:04.8877930|00:00:00.0108566|00:00:04.8986496|00:00:00.0000040|00:00:03.9925983|00:00:03.9926023|00:00:00.0000714|00:00:04.0011282|00:00:04.0011996|
|2|00:00:04.5712092|00:00:00.0108427|00:00:04.5820519|00:00:00.0000050|00:00:03.9804194|00:00:03.9804244|00:00:00.0000084|00:00:03.8663445|00:00:03.8663529|
|3|00:00:04.6649903|00:00:00.0115116|00:00:04.6765019|00:00:00.0000043|00:00:04.2339209|00:00:04.2339252|00:00:00.0000065|00:00:03.9438936|00:00:03.9439001|
|4|00:00:04.4971524|00:00:00.0114426|00:00:04.5085950|00:00:00.0000041|00:00:04.2764552|00:00:04.2764593|00:00:00.0000067|00:00:03.8992139|00:00:03.8992206|
|5|00:00:04.6727978|00:00:00.0109663|00:00:04.6837641|00:00:00.0000040|00:00:04.0773232|00:00:04.0773272|00:00:00.0000045|00:00:04.2885464|00:00:04.2885509|
|6|00:00:05.0123443|00:00:00.0108277|00:00:05.0231720|00:00:00.0000044|00:00:04.1014316|00:00:04.1014360|00:00:00.0000048|00:00:03.9820006|00:00:03.9820054|
|7|00:00:04.6175502|00:00:00.0104982|00:00:04.6280484|00:00:00.0000040|00:00:04.1091065|00:00:04.1091105|00:00:00.0000072|00:00:04.1666759|00:00:04.1666831|
|8|00:00:04.5998781|00:00:00.0114823|00:00:04.6113604|00:00:00.0000042|00:00:04.0330921|00:00:04.0330963|00:00:00.0000049|00:00:04.1027614|00:00:04.1027663|
|9|00:00:04.5484793|00:00:00.0113852|00:00:04.5598645|00:00:00.0000045|00:00:03.9282791|00:00:03.9282836|00:00:00.0000059|00:00:04.1086032|00:00:04.1086091|
|10|00:00:04.6343943|00:00:00.0111740|00:00:04.6455683|00:00:00.0000038|00:00:03.9670427|00:00:03.9670465|00:00:00.0000054|00:00:03.9993382|00:00:03.9993436|
|**AVG**|**00:00:04.6706588**|**00:00:00.0110987**|**00:00:04.6817576**|**00:00:00.0000042**|**00:00:04.0699669**|**00:00:04.0699711**|**00:00:00.0000125**|**00:00:04.0358505**|**00:00:04.0358631**|

Finished.

## Dapper Buffered Query Class and Record Async Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:05.0320826|316904,375|00:00:04.6728727|315918,15625|
|2|00:00:04.6297666|315924,96875|00:00:04.7394996|315953,875|
|3|00:00:04.9233846|315910,03125|00:00:06.6221741|315853,9375|
|4|00:00:05.5048006|315939,625|00:00:04.9855506|315874,75|
|5|00:00:06.9209051|315937,375|00:00:04.7536667|315878,9375|
|6|00:00:06.0181269|316004,9375|00:00:05.4877950|316423,5|
|7|00:00:05.3816363|315834,59375|00:00:05.0020204|315884,9375|
|**AVG**|**00:00:05.3751082**|**316023**|**00:00:05.1225245**|**316258,15625**|

Finished.

## Norm Read Class and Record Async Tests

|#|Class Elapsed Sec|Class Allocated KB|Record Elapsed Sec|Record Allocated KB|
|-|-----------------|------------------|------------------|-------------------|
|1|00:00:04.2608920|316495,3125|00:00:04.4594942|315878,15625|
|2|00:00:04.4650937|315712,78125|00:00:04.2513025|315806,5625|
|3|00:00:05.0550348|315731,375|00:00:04.4927675|315688,375|
|4|00:00:04.3202923|315765,5|00:00:04.3829591|316145,625|
|5|00:00:04.2521650|315840,3125|00:00:04.1660828|315485,625|
|6|00:00:04.4653331|315885,78125|00:00:04.4866012|315938,65625|
|7|00:00:04.4746869|315894,71875|00:00:04.5320292|315947,625|
|8|00:00:04.4077792|315609,1875|00:00:04.1521577|315915,375|
|9|00:00:04.4607108|315909,78125|00:00:04.4217146|315905,53125|
|10|00:00:04.9791072|316323,0625|00:00:04.5044459|315906,40625|
|**AVG**|**00:00:04.5141095**|**315916,78125**|**00:00:04.3849554**|**315861,78125**|

Finished.

## Norm Read Values and Tuples vs Raw Data Reader Async Tests

|#|Values Elapsed Sec|Values Allocated KB|Tuples Elapsed Sec|Tuples Allocated KB|Raw Reader Elapsed Sec|Raw Reader Allocated KB|
|-|------------------|-------------------|------------------|-------------------|----------------------|-----------------------|
|1|00:00:05.3662994|295227,875|00:00:05.1579002|298241,53125|00:00:04.2645770|497539,125|
|2|00:00:05.2301945|295401,25|00:00:05.3218048|298236,03125|00:00:04.4684496|444731,3125|
|3|00:00:05.0367320|295414,15625|00:00:04.7914298|298224,125|00:00:04.2080447|498298,125|
|4|00:00:04.9281670|295353,3125|00:00:05.0225668|298229,6875|00:00:04.5742709|447153,84375|
|5|00:00:04.9379865|295509,03125|00:00:04.9530233|298217,25|00:00:05.3584288|314949,90625|
|6|00:00:06.1643464|295624,75|00:00:05.5421934|298109,625|00:00:04.5320794|314800,125|
|7|00:00:05.1834609|295483|00:00:05.1187556|298198,75|00:00:04.4167411|314778,9375|
|8|00:00:05.3636320|295313,625|00:00:05.4172342|298345,84375|00:00:05.2387259|314947,5|
|9|00:00:05.4612913|295665,59375|00:00:05.2968639|298230,875|00:00:04.2387840|473439,75|
|10|00:00:05.1929509|295165,1875|00:00:04.9845276|298409,75|00:00:04.6951096|497572|
|**AVG**|**00:00:05.2865060**|**295415,78125**|**00:00:05.1606299**|**298244,34375**|**00:00:04.5995211**|**411821,0625**|

Finished.

## Dapper Buffered Query and Iteration vs Norm Read and Iteration Async Tests

|#|Dapper Buffered Query|Dapper Buffered Iteration|Daper Buffered Total|Dapper Buffered Allocated KB|Norm Read|Norm Iteration|Norm Total|Norm Allocated KB|
|-|---------------------|-------------------------|--------------------|----------------------------|---------|--------------|----------|-----------------|
|1|00:00:05.3405277|00:00:00.0160665|00:00:05.3565942|316033,625|00:00:00.0000134|00:00:04.5220110|00:00:04.5220244|316620,875|
|2|00:00:05.0230621|00:00:00.0126700|00:00:05.0357321|316871,78125|00:00:00.0000144|00:00:04.5414506|00:00:04.5414650|316820,6875|
|3|00:00:05.0524136|00:00:00.0125665|00:00:05.0649801|316867,59375|00:00:00.0000154|00:00:04.5369731|00:00:04.5369885|316589|
|4|00:00:05.6981626|00:00:00.0123305|00:00:05.7104931|316875,96875|00:00:00.0000231|00:00:04.5318229|00:00:04.5318460|316797,875|
|5|00:00:04.7987837|00:00:00.0117279|00:00:04.8105116|316871,625|00:00:00.0000149|00:00:04.2026862|00:00:04.2027011|316718,0625|
|6|00:00:04.8236177|00:00:00.0100432|00:00:04.8336609|316867,625|00:00:00.0000154|00:00:04.1059336|00:00:04.1059490|316798,4375|
|7|00:00:04.8700998|00:00:00.0112614|00:00:04.8813612|316867,71875|00:00:00.0000146|00:00:04.2160020|00:00:04.2160166|316766,3125|
|8|00:00:04.7856579|00:00:00.0106616|00:00:04.7963195|316875,71875|00:00:00.0000080|00:00:04.2750856|00:00:04.2750936|316749,9375|
|9|00:00:04.8657819|00:00:00.0117465|00:00:04.8775284|316876,03125|00:00:00.0000142|00:00:04.6467425|00:00:04.6467567|316783|
|10|00:00:04.7884131|00:00:00.0105040|00:00:04.7989171|316876,0625|00:00:00.0000128|00:00:04.2041415|00:00:04.2041543|316422,5625|
|**AVG**|**00:00:05.0046520**|**00:00:00.0119578**|**00:00:05.0166098**|**316788,375**|**00:00:00.0000146**|**00:00:04.3782849**|**00:00:04.3782995**|**316706,6875**|
